import pandas as pd
import numpy as np
import os

path= 'E:/Uni third/COMSOL - IP/code/20 sec/1 neuron 20 sec/1 neuron 150 um middle patch'

for subdir, dirs, files in os.walk(path):
    column_list = []
    ordered_columns=[]
#imposing a linear order for all probes, for multiple sweeps in a simulation
   
    # ordered_filenames=['probe2_p_0.001.csv','probe2_p_0.0011.csv','probe2_p_0.0012.csv','probe2_p_0.0013.csv','probe2_p_0.0014.csv','probe2_p_0.0015.csv','probe2_p_0.0016.csv','probe2_p_0.0017.csv','probe2_p_0.0018.csv','probe2_p_0.0019.csv','probe2_p_0.002.csv','probe2_p_0.0021.csv','probe2_p_0.0022.csv','probe2_p_0.0023.csv','probe2_p_0.0024.csv','probe2_p_0.0025.csv',
    #                    'probe2-5_p_0.001.csv','probe2-5_p_0.0011.csv','probe2-5_p_0.0012.csv','probe2-5_p_0.0013.csv','probe2-5_p_0.0014.csv','probe2-5_p_0.0015.csv','probe2-5_p_0.0016.csv','probe2-5_p_0.0017.csv','probe2-5_p_0.0018.csv','probe2-5_p_0.0019.csv','probe2-5_p_0.002.csv','probe2-5_p_0.0021.csv','probe2-5_p_0.0022.csv','probe2-5_p_0.0023.csv','probe2-5_p_0.0024.csv','probe2-5_p_0.0025.csv',
    #                    'probe2-5.1_p_0.001.csv','probe2-5.1_p_0.0011.csv','probe2-5.1_p_0.0012.csv','probe2-5.1_p_0.0013.csv','probe2-5.1_p_0.0014.csv','probe2-5.1_p_0.0015.csv','probe2-5.1_p_0.0016.csv','probe2-5.1_p_0.0017.csv','probe2-5.1_p_0.0018.csv','probe2-5.1_p_0.0019.csv','probe2-5.1_p_0.002.csv', 'probe2-5.1_p_0.0021.csv', 'probe2-5.1_p_0.0022.csv','probe2-5.1_p_0.0023.csv','probe2-5.1_p_0.0024.csv','probe2-5.1_p_0.0025.csv',
    #                    'probe5_p_0.001.csv','probe5_p_0.0011.csv','probe5_p_0.0012.csv','probe5_p_0.0013.csv','probe5_p_0.0014.csv','probe5_p_0.0015.csv','probe5_p_0.0016.csv','probe5_p_0.0017.csv','probe5_p_0.0018.csv','probe5_p_0.0019.csv','probe5_p_0.002.csv', 'probe5_p_0.0021.csv','probe5_p_0.0022.csv','probe5_p_0.0023.csv','probe5_p_0.0024.csv','probe5_p_0.0025.csv',
    #                    'probe7-2_p_0.001.csv','probe7-2_p_0.0011.csv','probe7-2_p_0.0012.csv','probe7-2_p_0.0013.csv','probe7-2_p_0.0014.csv','probe7-2_p_0.0015.csv','probe7-2_p_0.0016.csv','probe7-2_p_0.0017.csv','probe7-2_p_0.0018.csv','probe7-2_p_0.0019.csv','probe7-2_p_0.002.csv','probe7-2_p_0.0021.csv','probe7-2_p_0.0022.csv','probe7-2_p_0.0023.csv','probe7-2_p_0.0024.csv','probe7-2_p_0.0025.csv',
    #                    'probe1_p_0.001.csv','probe1_p_0.0011.csv','probe1_p_0.0012.csv','probe1_p_0.0013.csv','probe1_p_0.0014.csv','probe1_p_0.0015.csv','probe1_p_0.0016.csv','probe1_p_0.0017.csv','probe1_p_0.0018.csv','probe1_p_0.0019.csv','probe1_p_0.002.csv','probe1_p_0.0021.csv','probe1_p_0.0022.csv','probe1_p_0.0023.csv','probe1_p_0.0024.csv','probe1_p_0.0025.csv',
    #                    'probe1.1_p_0.001.csv','probe1.1_p_0.0011.csv','probe1.1_p_0.0012.csv','probe1.1_p_0.0013.csv','probe1.1_p_0.0014.csv','probe1.1_p_0.0015.csv','probe1.1_p_0.0016.csv','probe1.1_p_0.0017.csv','probe1.1_p_0.0018.csv','probe1.1_p_0.0019.csv','probe1.1_p_0.002.csv','probe1.1_p_0.0021.csv','probe1.1_p_0.0022.csv','probe1.1_p_0.0023.csv','probe1.1_p_0.0024.csv','probe1.1_p_0.0025.csv',
    #                    'probe5-6_p_0.001.csv','probe5-6_p_0.0011.csv','probe5-6_p_0.0012.csv','probe5-6_p_0.0013.csv','probe5-6_p_0.0014.csv','probe5-6_p_0.0015.csv','probe5-6_p_0.0016.csv','probe5-6_p_0.0017.csv','probe5-6_p_0.0018.csv','probe5-6_p_0.0019.csv','probe5-6_p_0.002.csv','probe5-6_p_0.0021.csv','probe5-6_p_0.0022.csv','probe5-6_p_0.0023.csv','probe5-6_p_0.0024.csv','probe5-6_p_0.0025.csv',
    #                    'probe7-2.1_p_0.001.csv','probe7-2.1_p_0.0011.csv','probe7-2.1_p_0.0012.csv','probe7-2.1_p_0.0013.csv','probe7-2.1_p_0.0014.csv','probe7-2.1_p_0.0015.csv','probe7-2.1_p_0.0016.csv','probe7-2.1_p_0.0017.csv','probe7-2.1_p_0.0018.csv','probe7-2.1_p_0.0019.csv','probe7-2.1_p_0.002.csv', 'probe7-2.1_p_0.0021.csv','probe7-2.1_p_0.0022.csv','probe7-2.1_p_0.0023.csv','probe7-2.1_p_0.0024.csv','probe7-2.1_p_0.0025.csv',
    #                    'probe8_p_0.001.csv','probe8_p_0.0011.csv','probe8_p_0.0012.csv','probe8_p_0.0013.csv','probe8_p_0.0014.csv','probe8_p_0.0015.csv','probe8_p_0.0016.csv','probe8_p_0.0017.csv','probe8_p_0.0018.csv','probe8_p_0.0019.csv','probe8_p_0.002.csv','probe8_p_0.0021.csv','probe8_p_0.0022.csv','probe8_p_0.0023.csv','probe8_p_0.0024.csv','probe8_p_0.0025.csv',
    #                    'probe8.1_p_0.001.csv','probe8.1_p_0.0011.csv','probe8.1_p_0.0012.csv','probe8.1_p_0.0013.csv','probe8.1_p_0.0014.csv','probe8.1_p_0.0015.csv','probe8.1_p_0.0016.csv','probe8.1_p_0.0017.csv','probe8.1_p_0.0018.csv','probe8.1_p_0.0019.csv','probe8.1_p_0.002.csv','probe8.1_p_0.0021.csv','probe8.1_p_0.0022.csv','probe8.1_p_0.0023.csv','probe8.1_p_0.0024.csv','probe8.1_p_0.0025.csv',
    #                    'probe5-6.1_p_0.001.csv','probe5-6.1_p_0.0011.csv','probe5-6.1_p_0.0012.csv','probe5-6.1_p_0.0013.csv','probe5-6.1_p_0.0014.csv','probe5-6.1_p_0.0015.csv','probe5-6.1_p_0.0016.csv','probe5-6.1_p_0.0017.csv','probe5-6.1_p_0.0018.csv','probe5-6.1_p_0.0019.csv','probe5-6.1_p_0.002.csv','probe5-6.1_p_0.0021.csv','probe5-6.1_p_0.0022.csv','probe5-6.1_p_0.0023.csv','probe5-6.1_p_0.0024.csv','probe5-6.1_p_0.0025.csv',
    #                    'probe7_p_0.001.csv','probe7_p_0.0011.csv','probe7_p_0.0012.csv','probe7_p_0.0013.csv','probe7_p_0.0014.csv','probe7_p_0.0015.csv','probe7_p_0.0016.csv','probe7_p_0.0017.csv','probe7_p_0.0018.csv','probe7_p_0.0019.csv','probe7_p_0.002.csv','probe7_p_0.0021.csv','probe7_p_0.0022.csv','probe7_p_0.0023.csv','probe7_p_0.0024.csv','probe7_p_0.0025.csv',
    #                    'probe6-7_p_0.001.csv','probe6-7_p_0.0011.csv','probe6-7_p_0.0012.csv','probe6-7_p_0.0013.csv','probe6-7_p_0.0014.csv','probe6-7_p_0.0015.csv','probe6-7_p_0.0016.csv','probe6-7_p_0.0017.csv','probe6-7_p_0.0018.csv','probe6-7_p_0.0019.csv','probe6-7_p_0.002.csv','probe6-7_p_0.0021.csv','probe6-7_p_0.0022.csv','probe6-7_p_0.0023.csv','probe6-7_p_0.0024.csv','probe6-7_p_0.0025.csv',
    #                    'probe6-7.1_p_0.001.csv','probe6-7.1_p_0.0011.csv','probe6-7.1_p_0.0012.csv','probe6-7.1_p_0.0013.csv','probe6-7.1_p_0.0014.csv','probe6-7.1_p_0.0015.csv','probe6-7.1_p_0.0016.csv','probe6-7.1_p_0.0017.csv','probe6-7.1_p_0.0018.csv','probe6-7.1_p_0.0019.csv','probe6-7.1_p_0.002.csv','probe6-7.1_p_0.0021.csv','probe6-7.1_p_0.0022.csv','probe6-7.1_p_0.0023.csv','probe6-7.1_p_0.0024.csv','probe6-7.1_p_0.0025.csv',
    #                    'probe6_p_0.001.csv','probe6_p_0.0011.csv','probe6_p_0.0012.csv','probe6_p_0.0013.csv','probe6_p_0.0014.csv','probe6_p_0.0015.csv','probe6_p_0.0016.csv','probe6_p_0.0017.csv','probe6_p_0.0018.csv','probe6_p_0.0019.csv','probe6_p_0.002.csv','probe6_p_0.0021.csv','probe6_p_0.0022.csv','probe6_p_0.0023.csv','probe6_p_0.0024.csv','probe6_p_0.0025.csv']

    # ordered_filenames=['probe2_q_0.001.csv','probe2_q_0.0011.csv','probe2_q_0.0012.csv','probe2_q_0.0013.csv','probe2_q_0.0014.csv','probe2_q_0.0015.csv','probe2_q_0.0016.csv','probe2_q_0.0017.csv','probe2_q_0.0018.csv','probe2_q_0.0019.csv','probe2_q_0.002.csv','probe2_q_0.0021.csv','probe2_q_0.0022.csv','probe2_q_0.0023.csv','probe2_q_0.0024.csv','probe2_q_0.0025.csv',
    #                    'probe2-5_q_0.001.csv','probe2-5_q_0.0011.csv','probe2-5_q_0.0012.csv','probe2-5_q_0.0013.csv','probe2-5_q_0.0014.csv','probe2-5_q_0.0015.csv','probe2-5_q_0.0016.csv','probe2-5_q_0.0017.csv','probe2-5_q_0.0018.csv','probe2-5_q_0.0019.csv','probe2-5_q_0.002.csv','probe2-5_q_0.0021.csv','probe2-5_q_0.0022.csv','probe2-5_q_0.0023.csv','probe2-5_q_0.0024.csv','probe2-5_q_0.0025.csv',
    #                    'probe2-5.1_q_0.001.csv','probe2-5.1_q_0.0011.csv','probe2-5.1_q_0.0012.csv','probe2-5.1_q_0.0013.csv','probe2-5.1_q_0.0014.csv','probe2-5.1_q_0.0015.csv','probe2-5.1_q_0.0016.csv','probe2-5.1_q_0.0017.csv','probe2-5.1_q_0.0018.csv','probe2-5.1_q_0.0019.csv','probe2-5.1_q_0.002.csv', 'probe2-5.1_q_0.0021.csv', 'probe2-5.1_q_0.0022.csv','probe2-5.1_q_0.0023.csv','probe2-5.1_q_0.0024.csv','probe2-5.1_q_0.0025.csv',
    #                    'probe5_q_0.001.csv','probe5_q_0.0011.csv','probe5_q_0.0012.csv','probe5_q_0.0013.csv','probe5_q_0.0014.csv','probe5_q_0.0015.csv','probe5_q_0.0016.csv','probe5_q_0.0017.csv','probe5_q_0.0018.csv','probe5_q_0.0019.csv','probe5_q_0.002.csv', 'probe5_q_0.0021.csv','probe5_q_0.0022.csv','probe5_q_0.0023.csv','probe5_q_0.0024.csv','probe5_q_0.0025.csv',
    #                    'probe7-2_q_0.001.csv','probe7-2_q_0.0011.csv','probe7-2_q_0.0012.csv','probe7-2_q_0.0013.csv','probe7-2_q_0.0014.csv','probe7-2_q_0.0015.csv','probe7-2_q_0.0016.csv','probe7-2_q_0.0017.csv','probe7-2_q_0.0018.csv','probe7-2_q_0.0019.csv','probe7-2_q_0.002.csv','probe7-2_q_0.0021.csv','probe7-2_q_0.0022.csv','probe7-2_q_0.0023.csv','probe7-2_q_0.0024.csv','probe7-2_q_0.0025.csv',
    #                    'probe1_q_0.001.csv','probe1_q_0.0011.csv','probe1_q_0.0012.csv','probe1_q_0.0013.csv','probe1_q_0.0014.csv','probe1_q_0.0015.csv','probe1_q_0.0016.csv','probe1_q_0.0017.csv','probe1_q_0.0018.csv','probe1_q_0.0019.csv','probe1_q_0.002.csv','probe1_q_0.0021.csv','probe1_q_0.0022.csv','probe1_q_0.0023.csv','probe1_q_0.0024.csv','probe1_q_0.0025.csv',
    #                    'probe1.1_q_0.001.csv','probe1.1_q_0.0011.csv','probe1.1_q_0.0012.csv','probe1.1_q_0.0013.csv','probe1.1_q_0.0014.csv','probe1.1_q_0.0015.csv','probe1.1_q_0.0016.csv','probe1.1_q_0.0017.csv','probe1.1_q_0.0018.csv','probe1.1_q_0.0019.csv','probe1.1_q_0.002.csv','probe1.1_q_0.0021.csv','probe1.1_q_0.0022.csv','probe1.1_q_0.0023.csv','probe1.1_q_0.0024.csv','probe1.1_q_0.0025.csv',
    #                    'probe5-6_q_0.001.csv','probe5-6_q_0.0011.csv','probe5-6_q_0.0012.csv','probe5-6_q_0.0013.csv','probe5-6_q_0.0014.csv','probe5-6_q_0.0015.csv','probe5-6_q_0.0016.csv','probe5-6_q_0.0017.csv','probe5-6_q_0.0018.csv','probe5-6_q_0.0019.csv','probe5-6_q_0.002.csv','probe5-6_q_0.0021.csv','probe5-6_q_0.0022.csv','probe5-6_q_0.0023.csv','probe5-6_q_0.0024.csv','probe5-6_q_0.0025.csv',
    #                    'probe7-2.1_q_0.001.csv','probe7-2.1_q_0.0011.csv','probe7-2.1_q_0.0012.csv','probe7-2.1_q_0.0013.csv','probe7-2.1_q_0.0014.csv','probe7-2.1_q_0.0015.csv','probe7-2.1_q_0.0016.csv','probe7-2.1_q_0.0017.csv','probe7-2.1_q_0.0018.csv','probe7-2.1_q_0.0019.csv','probe7-2.1_q_0.002.csv', 'probe7-2.1_q_0.0021.csv','probe7-2.1_q_0.0022.csv','probe7-2.1_q_0.0023.csv','probe7-2.1_q_0.0024.csv','probe7-2.1_q_0.0025.csv',
    #                    'probe8_q_0.001.csv','probe8_q_0.0011.csv','probe8_q_0.0012.csv','probe8_q_0.0013.csv','probe8_q_0.0014.csv','probe8_q_0.0015.csv','probe8_q_0.0016.csv','probe8_q_0.0017.csv','probe8_q_0.0018.csv','probe8_q_0.0019.csv','probe8_q_0.002.csv','probe8_q_0.0021.csv','probe8_q_0.0022.csv','probe8_q_0.0023.csv','probe8_q_0.0024.csv','probe8_q_0.0025.csv',
    #                    'probe8.1_q_0.001.csv','probe8.1_q_0.0011.csv','probe8.1_q_0.0012.csv','probe8.1_q_0.0013.csv','probe8.1_q_0.0014.csv','probe8.1_q_0.0015.csv','probe8.1_q_0.0016.csv','probe8.1_q_0.0017.csv','probe8.1_q_0.0018.csv','probe8.1_q_0.0019.csv','probe8.1_q_0.002.csv','probe8.1_q_0.0021.csv','probe8.1_q_0.0022.csv','probe8.1_q_0.0023.csv','probe8.1_q_0.0024.csv','probe8.1_q_0.0025.csv',
    #                    'probe5-6.1_q_0.001.csv','probe5-6.1_q_0.0011.csv','probe5-6.1_q_0.0012.csv','probe5-6.1_q_0.0013.csv','probe5-6.1_q_0.0014.csv','probe5-6.1_q_0.0015.csv','probe5-6.1_q_0.0016.csv','probe5-6.1_q_0.0017.csv','probe5-6.1_q_0.0018.csv','probe5-6.1_q_0.0019.csv','probe5-6.1_q_0.002.csv','probe5-6.1_q_0.0021.csv','probe5-6.1_q_0.0022.csv','probe5-6.1_q_0.0023.csv','probe5-6.1_q_0.0024.csv','probe5-6.1_q_0.0025.csv',
    #                    'probe7_q_0.001.csv','probe7_q_0.0011.csv','probe7_q_0.0012.csv','probe7_q_0.0013.csv','probe7_q_0.0014.csv','probe7_q_0.0015.csv','probe7_q_0.0016.csv','probe7_q_0.0017.csv','probe7_q_0.0018.csv','probe7_q_0.0019.csv','probe7_q_0.002.csv','probe7_q_0.0021.csv','probe7_q_0.0022.csv','probe7_q_0.0023.csv','probe7_q_0.0024.csv','probe7_q_0.0025.csv',
    #                    'probe6-7_q_0.001.csv','probe6-7_q_0.0011.csv','probe6-7_q_0.0012.csv','probe6-7_q_0.0013.csv','probe6-7_q_0.0014.csv','probe6-7_q_0.0015.csv','probe6-7_q_0.0016.csv','probe6-7_q_0.0017.csv','probe6-7_q_0.0018.csv','probe6-7_q_0.0019.csv','probe6-7_q_0.002.csv','probe6-7_q_0.0021.csv','probe6-7_q_0.0022.csv','probe6-7_q_0.0023.csv','probe6-7_q_0.0024.csv','probe6-7_q_0.0025.csv',
    #                    'probe6-7.1_q_0.001.csv','probe6-7.1_q_0.0011.csv','probe6-7.1_q_0.0012.csv','probe6-7.1_q_0.0013.csv','probe6-7.1_q_0.0014.csv','probe6-7.1_q_0.0015.csv','probe6-7.1_q_0.0016.csv','probe6-7.1_q_0.0017.csv','probe6-7.1_q_0.0018.csv','probe6-7.1_q_0.0019.csv','probe6-7.1_q_0.002.csv','probe6-7.1_q_0.0021.csv','probe6-7.1_q_0.0022.csv','probe6-7.1_q_0.0023.csv','probe6-7.1_q_0.0024.csv','probe6-7.1_q_0.0025.csv',
    #                    'probe6_q_0.001.csv','probe6_q_0.0011.csv','probe6_q_0.0012.csv','probe6_q_0.0013.csv','probe6_q_0.0014.csv','probe6_q_0.0015.csv','probe6_q_0.0016.csv','probe6_q_0.0017.csv','probe6_q_0.0018.csv','probe6_q_0.0019.csv','probe6_q_0.002.csv','probe6_q_0.0021.csv','probe6_q_0.0022.csv','probe6_q_0.0023.csv','probe6_q_0.0024.csv','probe6_q_0.0025.csv']
     
    ordered_filenames=['probe2_p_0.0013.csv','probe2_p_0.00135.csv','probe2_p_0.0014.csv','probe2-5_p_0.0013.csv','probe2-5_p_0.00135.csv','probe2-5_p_0.0014.csv','probe2-5.1_p_0.0013.csv','probe2-5.1_p_0.00135.csv','probe2-5.1_p_0.0014.csv','probe5_p_0.0013.csv','probe5_p_0.00135.csv','probe5_p_0.0014.csv',
                 'probe7-2_p_0.0013.csv','probe7-2_p_0.00135.csv','probe7-2_p_0.0014.csv','probe1_p_0.0013.csv','probe1_p_0.00135.csv','probe1_p_0.0014.csv','probe1.1_p_0.0013.csv','probe1.1_p_0.00135.csv','probe1.1_p_0.0014.csv','probe5-6_p_0.0013.csv','probe5-6_p_0.00135.csv','probe5-6_p_0.0014.csv',
                 'probe7-2.1_p_0.0013.csv','probe7-2.1_p_0.00135.csv','probe7-2.1_p_0.0014.csv','probe8_p_0.0013.csv','probe8_p_0.00135.csv','probe8_p_0.0014.csv','probe8.1_p_0.0013.csv','probe8.1_p_0.00135.csv','probe8.1_p_0.0014.csv','probe5-6.1_p_0.0013.csv','probe5-6.1_p_0.00135.csv','probe5-6.1_p_0.0014.csv',
                 'probe7_p_0.0013.csv','probe7_p_0.00135.csv','probe7_p_0.0014.csv','probe6-7_p_0.0013.csv','probe6-7_p_0.00135.csv','probe6-7_p_0.0014.csv','probe6-7.1_p_0.0013.csv','probe6-7.1_p_0.00135.csv','probe6-7.1_p_0.0014.csv','probe6_p_0.0013.csv','probe6_p_0.00135.csv','probe6_p_0.0014.csv']

    # ordered_filenames=['probe2_p_4E-4.csv','probe2_p_9E-4.csv','probe2_p_0.0014.csv','probe2-5_p_4E-4.csv','probe2-5_p_9E-4.csv','probe2-5_p_0.0014.csv','probe2-5.1_p_4E-4.csv','probe2-5.1_p_9E-4.csv','probe2-5.1_p_0.0014.csv','probe5_p_4E-4.csv','probe5_p_9E-4.csv','probe5_p_0.0014.csv',
    #              'probe7-2_p_4E-4.csv','probe7-2_p_9E-4.csv','probe7-2_p_0.0014.csv','probe1_p_4E-4.csv','probe1_p_9E-4.csv','probe1_p_0.0014.csv','probe1.1_p_4E-4.csv','probe1.1_p_9E-4.csv','probe1.1_p_0.0014.csv','probe5-6_p_4E-4.csv','probe5-6_p_9E-4.csv','probe5-6_p_0.0014.csv',
    #              'probe7-2.1_p_4E-4.csv','probe7-2.1_p_9E-4.csv','probe7-2.1_p_0.0014.csv','probe8_p_4E-4.csv','probe8_p_9E-4.csv','probe8_p_0.0014.csv','probe8.1_p_4E-4.csv','probe8.1_p_9E-4.csv','probe8.1_p_0.0014.csv','probe5-6.1_p_4E-4.csv','probe5-6.1_p_9E-4.csv','probe5-6.1_p_0.0014.csv',
    #              'probe7_p_4E-4.csv','probe7_p_9E-4.csv','probe7_p_0.0014.csv','probe6-7_p_4E-4.csv','probe6-7_p_9E-4.csv','probe6-7_p_0.0014.csv','probe6-7.1_p_4E-4.csv','probe6-7.1_p_9E-4.csv','probe6-7.1_p_0.0014.csv','probe6_p_4E-4.csv','probe6_p_9E-4.csv','probe6_p_0.0014.csv']

#checking that all probes names can be found within the available files
    for col in ordered_filenames:
        if col in files:
            ordered_columns.append(col) #files are now appended in the order proposed

    for colname in ordered_columns:
        if colname.endswith(".csv") and colname.startswith('p'): #extra check to avoid any other files within the current folder
            file_path = os.path.join(subdir, colname)

            df=pd.read_csv(file_path, usecols=[1,2,3,4,5,6,7,8,9,10,11,12,13, 14]) 
            df = df.rename(columns={df.columns[0]:'NormE '  + colname[:-4], 
            df.columns[1]:'es.EX '  + colname[:-4], df.columns[2]: 'es.EY '  + colname[:-4], df.columns[3]: 'es.EZ ' + colname[:-4],
            df.columns[4]:'es.tEX ' + colname[:-4], df.columns[5]: 'es.tEY ' + colname[:-4], df.columns[6]: 'es.tEZ ' + colname[:-4], 
            df.columns[7]:'es.Ex '  + colname[:-4], df.columns[8]: 'es.Ey '  + colname[:-4], df.columns[9]: 'es.Ez ' + colname[:-4],
            df.columns[10]:'es.tEx '+ colname[:-4], df.columns[11]:'es.tEy ' + colname[:-4], df.columns[12]:'es.tEz ' + colname[:-4],
            df.columns[13]:'V ' + colname[:-4]}) #rename the column based on the name of the file
            column_list.append(df)

# Combine all csv files into one, exporting one big csv with all data from one simuation with multiple sweeps having the probes in the right order
            combined_df = pd.concat(column_list, axis=1)
            combined_df.reset_index(drop=True, inplace=True)
            sample_rate = np.arange(start=0, step=0.1, stop=100.1, dtype=float) #--> 100 sec
            # sample_rate = np.arange(start=0, step=0.02, stop=20.1, dtype=float) #--> 20 sec
            index = np.round(sample_rate, decimals=2)
            combined_df =combined_df.set_index(index)

            folder_name = os.path.basename(subdir)
            combined_file_path = os.path.join(subdir, "combined " + folder_name + ".csv")
            combined_df.to_csv(combined_file_path)